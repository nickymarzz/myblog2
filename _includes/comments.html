{% if page.comments != false %}
  <div class="comments-section">
    <h3>Comments</h3>
    
    {% if site.comments.provider == 'disqus' %}
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          this.page.url = '{{ site.url }}{{ page.url }}';
          this.page.identifier = '{{ page.id }}';
        };
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://{{ site.comments.disqus.shortname }}.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
    {% elsif site.comments.provider == 'utterances' %}
      <script src="https://utterances.client.js"
              repo="{{ site.comments.utterances.repo }}"
              issue-term="{{ site.comments.utterances.issue_term | default: 'pathname' }}"
              theme="{{ site.comments.utterances.theme | default: 'github-light' }}"
              crossorigin="anonymous"
              async>
      </script>
    
    {% elsif site.comments.provider == 'giscus' %}
      <script src="https://giscus.app/client.js"
              data-repo="{{ site.comments.giscus.repo }}"
              data-repo-id="{{ site.comments.giscus.repo_id }}"
              data-category="{{ site.comments.giscus.category }}"
              data-category-id="{{ site.comments.giscus.category_id }}"
              data-mapping="{{ site.comments.giscus.mapping | default: 'pathname' }}"
              data-reactions-enabled="{{ site.comments.giscus.reactions_enabled | default: '1' }}"
              data-emit-metadata="{{ site.comments.giscus.emit_metadata | default: '0' }}"
              data-theme="{{ site.comments.giscus.theme | default: 'light' }}"
              crossorigin="anonymous"
              async>
      </script>
    
    {% else %}
      <p>Comments are disabled for this post.</p>
    {% endif %}
  </div>
{% endif %}

